<!-- Generated from Jupyter notebook -->

<p>This notebook explores modern data visualization techniques using matplotlib, seaborn, and plotly for creating interactive and publication-ready charts.</p>

<h2 id="topics-covered">Topics Covered</h2>
<ul>
  <li>Statistical visualizations</li>
  <li>Interactive plots with Plotly</li>
  <li>Custom styling and themes</li>
  <li>Best practices for data storytelling</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Import visualization libraries
import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import plotly.graph_objects as go
import plotly.express as px
from plotly.subplots import make_subplots
import warnings
warnings.filterwarnings('ignore')

# Set random seed for reproducibility
np.random.seed(42)

print("üìä Visualization libraries loaded successfully!")
</code></pre></div></div>

<h2 id="creating-sample-dataset">Creating Sample Dataset</h2>

<p>Let‚Äôs generate a comprehensive dataset for our visualization examples:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Generate sample e-commerce dataset
n_customers = 1000
n_months = 12

# Customer demographics
customers = pd.DataFrame({
    'customer_id': range(1, n_customers + 1),
    'age': np.random.normal(35, 12, n_customers).astype(int),
    'income': np.random.lognormal(10.5, 0.5, n_customers),
    'city': np.random.choice(['New York', 'Los Angeles', 'Chicago', 'Houston', 'Phoenix'], n_customers),
    'segment': np.random.choice(['Premium', 'Standard', 'Budget'], n_customers, p=[0.2, 0.5, 0.3])
})

# Monthly sales data
monthly_sales = []
for month in range(1, n_months + 1):
    for customer in range(1, n_customers + 1):
        if np.random.random() &lt; 0.7:  # 70% chance of purchase each month
            purchase_amount = np.random.exponential(100) + 20
            monthly_sales.append({
                'customer_id': customer,
                'month': month,
                'purchase_amount': purchase_amount,
                'category': np.random.choice(['Electronics', 'Clothing', 'Books', 'Home', 'Sports'])
            })

sales_df = pd.DataFrame(monthly_sales)
sales_df = sales_df.merge(customers, on='customer_id')

print(f"Generated dataset with {len(sales_df)} transactions")
print(f"Customers: {len(customers)} | Categories: {sales_df['category'].nunique()}")
sales_df.head()
</code></pre></div></div>

<h2 id="statistical-visualizations">Statistical Visualizations</h2>

<h3 id="distribution-analysis">Distribution Analysis</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Create a comprehensive distribution analysis
fig, axes = plt.subplots(2, 2, figsize=(16, 12))
fig.suptitle('Customer Demographics and Purchase Behavior Analysis', fontsize=16, y=0.98)

# Age distribution with KDE
sns.histplot(data=customers, x='age', kde=True, ax=axes[0,0])
axes[0,0].set_title('Age Distribution of Customers')
axes[0,0].set_xlabel('Age (years)')

# Income distribution by segment
sns.boxplot(data=customers, x='segment', y='income', ax=axes[0,1])
axes[0,1].set_title('Income Distribution by Customer Segment')
axes[0,1].set_ylabel('Annual Income ($)')
axes[0,1].tick_params(axis='y', rotation=0)

# Purchase amount distribution
purchase_amounts = sales_df['purchase_amount']
axes[1,0].hist(purchase_amounts, bins=50, alpha=0.7, color='skyblue', edgecolor='black')
axes[1,0].axvline(purchase_amounts.mean(), color='red', linestyle='--', 
                  label=f'Mean: ${purchase_amounts.mean():.2f}')
axes[1,0].axvline(purchase_amounts.median(), color='orange', linestyle='--', 
                  label=f'Median: ${purchase_amounts.median():.2f}')
axes[1,0].set_title('Purchase Amount Distribution')
axes[1,0].set_xlabel('Purchase Amount ($)')
axes[1,0].legend()

# Category popularity
category_counts = sales_df['category'].value_counts()
axes[1,1].pie(category_counts.values, labels=category_counts.index, autopct='%1.1f%%', 
              startangle=90, colors=plt.cm.Set3.colors)
axes[1,1].set_title('Purchase Distribution by Category')

plt.tight_layout()
plt.show()

# Summary statistics
print("\nüìà Key Statistics:")
print(f"Average purchase amount: ${sales_df['purchase_amount'].mean():.2f}")
print(f"Total revenue: ${sales_df['purchase_amount'].sum():,.2f}")
print(f"Most popular category: {sales_df['category'].mode().iloc[0]}")
print(f"Average customer age: {customers['age'].mean():.1f} years")
</code></pre></div></div>

<h2 id="time-series-analysis">Time Series Analysis</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Monthly sales trends analysis
monthly_metrics = sales_df.groupby('month').agg({
    'purchase_amount': ['sum', 'mean', 'count'],
    'customer_id': 'nunique'
}).round(2)

monthly_metrics.columns = ['Total_Sales', 'Avg_Purchase', 'Num_Transactions', 'Unique_Customers']
monthly_metrics = monthly_metrics.reset_index()

# Create time series visualization
fig, axes = plt.subplots(2, 2, figsize=(16, 10))
fig.suptitle('Monthly Sales Performance Dashboard', fontsize=16)

# Total sales trend
axes[0,0].plot(monthly_metrics['month'], monthly_metrics['Total_Sales'], 
               marker='o', linewidth=2, markersize=8, color='#2E86AB')
axes[0,0].fill_between(monthly_metrics['month'], monthly_metrics['Total_Sales'], 
                       alpha=0.3, color='#2E86AB')
axes[0,0].set_title('Monthly Total Sales')
axes[0,0].set_xlabel('Month')
axes[0,0].set_ylabel('Sales ($)')
axes[0,0].grid(True, alpha=0.3)

# Average purchase amount
axes[0,1].bar(monthly_metrics['month'], monthly_metrics['Avg_Purchase'], 
              color='#A23B72', alpha=0.8)
axes[0,1].set_title('Average Purchase Amount by Month')
axes[0,1].set_xlabel('Month')
axes[0,1].set_ylabel('Average Purchase ($)')

# Number of transactions
axes[1,0].plot(monthly_metrics['month'], monthly_metrics['Num_Transactions'], 
               marker='s', linewidth=2, markersize=6, color='#F18F01')
axes[1,0].set_title('Monthly Transaction Count')
axes[1,0].set_xlabel('Month')
axes[1,0].set_ylabel('Number of Transactions')
axes[1,0].grid(True, alpha=0.3)

# Unique customers
axes[1,1].plot(monthly_metrics['month'], monthly_metrics['Unique_Customers'], 
               marker='^', linewidth=2, markersize=6, color='#C73E1D')
axes[1,1].set_title('Monthly Active Customers')
axes[1,1].set_xlabel('Month')
axes[1,1].set_ylabel('Unique Customers')
axes[1,1].grid(True, alpha=0.3)

plt.tight_layout()
plt.show()

print("\nüìä Monthly Performance Summary:")
print(monthly_metrics)
</code></pre></div></div>

<h2 id="interactive-visualizations-with-plotly">Interactive Visualizations with Plotly</h2>

<p>Creating interactive dashboards for better data exploration:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Create interactive scatter plot
fig_scatter = px.scatter(
    sales_df, 
    x='age', 
    y='purchase_amount',
    color='segment',
    size='income',
    hover_data=['city', 'category'],
    title='Customer Purchase Behavior Analysis',
    labels={'age': 'Customer Age', 'purchase_amount': 'Purchase Amount ($)'}
)

fig_scatter.update_layout(
    height=500,
    showlegend=True,
    title_x=0.5
)

fig_scatter.show()

# Create interactive time series
monthly_category = sales_df.groupby(['month', 'category'])['purchase_amount'].sum().reset_index()

fig_line = px.line(
    monthly_category,
    x='month',
    y='purchase_amount',
    color='category',
    title='Monthly Sales by Category',
    labels={'month': 'Month', 'purchase_amount': 'Sales ($)', 'category': 'Category'}
)

fig_line.update_layout(
    height=400,
    showlegend=True,
    title_x=0.5
)

fig_line.show()

print("üéØ Interactive visualizations created! Hover over points for detailed information.")
</code></pre></div></div>

<h2 id="advanced-correlation-analysis">Advanced Correlation Analysis</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Customer-level aggregation for correlation analysis
customer_metrics = sales_df.groupby('customer_id').agg({
    'purchase_amount': ['sum', 'mean', 'count'],
    'month': 'nunique'
}).round(2)

customer_metrics.columns = ['Total_Spent', 'Avg_Purchase', 'Num_Purchases', 'Active_Months']
customer_metrics = customer_metrics.merge(customers[['customer_id', 'age', 'income']], on='customer_id')

# Correlation heatmap
plt.figure(figsize=(12, 8))
correlation_matrix = customer_metrics[['age', 'income', 'Total_Spent', 'Avg_Purchase', 'Num_Purchases', 'Active_Months']].corr()

# Create custom heatmap
mask = np.triu(np.ones_like(correlation_matrix, dtype=bool))
sns.heatmap(correlation_matrix, 
            mask=mask,
            annot=True, 
            cmap='RdYlBu_r', 
            center=0,
            square=True,
            fmt='.3f',
            cbar_kws={"shrink": .8})

plt.title('Customer Behavior Correlation Matrix', fontsize=16, pad=20)
plt.tight_layout()
plt.show()

# Identify strongest correlations
corr_pairs = []
for i in range(len(correlation_matrix.columns)):
    for j in range(i+1, len(correlation_matrix.columns)):
        corr_pairs.append({
            'var1': correlation_matrix.columns[i],
            'var2': correlation_matrix.columns[j],
            'correlation': correlation_matrix.iloc[i, j]
        })

corr_df = pd.DataFrame(corr_pairs).sort_values('correlation', key=abs, ascending=False)

print("\nüîç Strongest Correlations:")
print(corr_df.head(10))
</code></pre></div></div>

<h2 id="key-insights-and-conclusions">Key Insights and Conclusions</h2>

<p>Based on our comprehensive data visualization analysis:</p>

<h3 id="-customer-demographics">üìä <strong>Customer Demographics</strong></h3>
<ul>
  <li>Average customer age: ~35 years with normal distribution</li>
  <li>Income varies significantly by customer segment</li>
  <li>Premium customers show highest purchase amounts</li>
</ul>

<h3 id="-sales-patterns">üìà <strong>Sales Patterns</strong></h3>
<ul>
  <li>Electronics and Clothing are the most popular categories</li>
  <li>Monthly sales show seasonal trends</li>
  <li>Average purchase amount remains relatively stable</li>
</ul>

<h3 id="-behavioral-insights">üéØ <strong>Behavioral Insights</strong></h3>
<ul>
  <li>Strong correlation between income and total spending</li>
  <li>Customer age moderately influences purchase behavior</li>
  <li>Active months correlate with total spending patterns</li>
</ul>

<h3 id="-actionable-recommendations">üí° <strong>Actionable Recommendations</strong></h3>
<ol>
  <li><strong>Target premium segments</strong> for high-value campaigns</li>
  <li><strong>Seasonal promotions</strong> based on monthly trends</li>
  <li><strong>Category-specific strategies</strong> for Electronics and Clothing</li>
  <li><strong>Age-based personalization</strong> for marketing campaigns</li>
</ol>

<h2 id="next-steps">Next Steps</h2>
<ul>
  <li>Implement real-time dashboards using these visualizations</li>
  <li>Add geographic analysis with map visualizations</li>
  <li>Create predictive models based on identified patterns</li>
  <li>Develop customer segmentation strategies</li>
</ul>
